language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.gradle"
jobs:
  include:
    - stage: build
      if: tag IS blank
      install: skip
      before_script: if [[ $encrypted_721207a5a7f8_key ]]; then openssl aes-256-cbc -K $encrypted_721207a5a7f8_key -iv $encrypted_721207a5a7f8_iv -in secring.gpg.enc -out secring.gpg -d; fi
      script: ./gradlew clean build

    - stage: deploy
      if: tag =~ ^\d+\.\d+\.\d+$
      install: skip
      before_script: openssl aes-256-cbc -K $encrypted_721207a5a7f8_key -iv $encrypted_721207a5a7f8_iv -in secring.gpg.enc -out secring.gpg -d
      script: ./gradlew clean build publish
env:
  global:
  - signingSecretKeyRingFile="`pwd`/secring.gpg"
  - secure: "MpiifWpBpsDfZ4OnQna/yRD4JaKXr9VvPXT4Ik0Njc/6y3BBGOsytXj4F1v6EG5UyEtVBLYFSTCg8kKaE0U6RF2sVb08zuK0PJfdhjY6AS9XLXeli4ZKrKSKWfpTNpTQ3pLF5fVj33lMT92UmldFqXhThlxpMs17jaQsnDnPFweis6szo+p4mU3/BojxjY96b7bSfGg5K0wiyCz+5V++jB/Kej51AuJyjlnsfbybKxPPs3NAunbnl17Vfp+9aBtOZjA9VUmZ2BUC7VbJnSge4FKmCr8eStw+s0RSUESHWbEie7f3vg4QkOrmzEgenJxozNxgA1pVfgZevfIz2P62j5AxbOrX3z4c/zgMB8uonBW+B6fiZrVVJ2S33gXuZ9xISARUKICzmmE/Gsq92W3VVKGa5+ZMCPbP7bP18P36/PZQCrUXNlBWtceyCTG3Gh1XRkVgXQlpXn0RI9vWcj6wKRUcS8LU9CJ3SEHMI3wGo3bTlvyvYhEhUzTWygN9ZZhceM98CfQhYMvc5hP36sh4fbx5+JP2Gwvn+198TPZdf+yrwtRGO+XvEZtwgOuX574fUFAaGL3CmnISzRGtpbNZggOTdu/IGjDEZG5iu7obfRODc5koI7kNeNFuycZjtvLazEI44RfZjKxh3EN5oai6DwJJ3Uroll+J1cZemnsmhvg="
  - secure: "ldb6phvNSoMZoMLNqQHDoiAOfTQUXr4cT2CHSVh0xMPK/mWXJnY3eYOzrPNzSPvOfiA18dzAK5OlGcxK5yOzfGCM+vRTcCjOV2u/oyjyb9mRhS0pIrs4AD2TZ/m9iFjSmhFZ2CufLXV878niQnC7lvPjV+iRxUicaCEDDioi7SBY1mqqNViDn5mx9KN+d3W+tvLT9H89zp9V1ewoVNnyoIW7g2gvLYvFuoudTq1PWvXK+vZFZNtoDjb2Y1XvybpjzsjMeUg2J5imRoKxPQf94TOHxF+IoexgsNSL/+QC4UoIVwkWgPhZmPMLyj/rN/mIV4TGN8PK4AP7j+PsXwOGWpy2b4beLxIt3/JCOpqTUV2B9RiFqgfi6jR6RuHmJXa1QX796KvjyEJLO0onKn5B7/jW9hng/eVVE1zHK9g/UT8ti81gkBVnUdQert6UnxxMbKNB9U50ElPQ/Pxr7lCWGjWD77OnWAgp+RRwbgcvJR/uBuZEuP9LAqKW5qntlpLo8wBDqvWoTHOAJ+zliTvaAuNuhhOghHIFrtrbPBNA4+Odro4NkXHHjDRzw0NjeW1adsWid11tzoA7a2SIZF9ohzh0jAs+h5Fy/onKHWPl/1UKakB9Yweo7WWM5Ld2E1zPVNgg8WpIcg/tHPUjSKvFynyr7OaYooiQhYO79O0V0+w="
  - secure: "Z8bJl2Q2hufZVC4dOyMuyZArt1HKMWn2ltoQZOJep4tr2StctgbhMJ8BDhQHBgl6h4/pqThzmciWuX45q+WnZnti4c4XsLh9iyma+d+TcKAn0NbzBqxnOyxXxWHDxETkt+MQS4wlgKm4/Dxgas8u2aEcbA9SsEm9Hr4HR4wxTRJQBHHRgTSANhVRfveDR4VsifWi6oc3pG0H+zZuXFKM3Er5vbW4t+FAV/PdXy3+9SQxi0GrKCnN7gbLy9p1XsiUL2kBpIkBk03MAKVj2Lbvx6H3WTQGozLZZMj9YOSjS/2zx6JdvpR1b8PIjwsynZo+mq/zsyDDSmuDveAzAEOY8t4G3VRV6rl+nM69/Csas6MbYPQ9ckH8EJYZ4c+Tus3MxIRJI+vb784bc7ZRRSpfYymZRKqCVySkyIwRM9xENtBi+VDIfY9htwtDHaFfMwfi3R4o87rWG67sMABp6jhabtChZEp6LtoZKSPpl0dCFQGIEOKIj2TChEn2+ipQ4+NjZQjw5tsdOXMD8g/KuJMJFxLXZtwkHfjvqZZkMXUFN/71hNFdBsRK0c5OhnHYWxAllTzDS/mHisdAnrFXCxGKiJ9ymdC8RK1ZNhiGRbHLNDgo5uoY+cCKZwWfX7jl6Tmxwz4X0rodSdUhXxAI/Y+TNou3ZIzg19a9A0Im9qbVvSU="
  - secure: "PRRAP3iUWB2Ld4xwAH7pE687MYLLsYGh9aldOdB7FPnFrRcIwW+UsGhai3qRzyTVAX9kpCdDm6I9bqdlDs06hSU3OyL1MUxZDKdTegbXoQxNzDynktyKQ0YmBAj1SYxVxRpjukR3cABnzr7ZZBo6ajUKotKxxxrjSaIrMaGbZ0uBy71GaWeRuAjyEuNPLeEJAt8ZaB7+ih/3PslYQszzT4Q7A5X0G6lqG0HOPevjkxzB3ZGHNNOP0oBaKzmlXIru7hOAmc5qseT4NPFc4+72hPz3s/6izeI3gd+byYdR1tty/+chZukNljPNz9XsATtVliLqhDqhakAZS5pu/69RXiivf6l4pHm3xdtm86dl6vUPh5fvc8mKAv6uNFhft+ZzTANBNp5kaB5P4ifc77xRjl8LjPCruvyk9ajDWvY+UYE+sTkoLon0OA8asUK17tECc6bkM6gjfrqc8n1jhFY5aIfYdoh3YEXrrQpPcTY1+0fmw5GE4J+C6J++G6SsHEdGLTBObcQDPnXuxR4WsQhsnSyzZ1c3y9JkOiWVpWrSkvR3w/WdcXSD++kHJbsWBIZtuxkzl4YUN1/s2aGWcxpJiw3VE3avSCUZ2IqNLMFgWFq6v++hNAiBy1dNpI8jBmlWAoW7485uiBtvAa+/5nXLdMhGHOEuW+FMQXifiEZtVsU="
  - secure: "tAUHvOUm+qh5/0gVkeubQDgXp+X6nJ2W7sbQNfSkCCfYnzpqm5am2YAvsu35oZBH3CP9SVckxAuzNUFgkcDjMsXTpvbuMb8H2pDZ7PEFtSZCp0igbAliclvhAxDHT3om9Y5tUJjnojifzHHFSOSeeXeX5ZW9fUUYKbSg/NNWo3kt1PTzxkhqHrLODx6lJ4i54Z8yVdSuTyEOwVoUhiTaSHgn8SszOJH+s8bYuNnZQ/z49cqZXhe9CRzoXhUAWHRVzRe76/3edRSUy46ke7iuGOK9al6M5vTIciXyr0odkFHtlHsmwTZnSfA7sdIWJRtynloFVUOk9KYGxg+cZ1kuLuUzLWjekvBg1y2/ujcW7elj91ON1GTndpGYHUPQcShIicO0oHquwcKmVKO5lYtC3CYJ8vkSkbGMrLFzDrGiyB5B3BW9HEWYryx2EtHLnguHk/QCvqz4N8lSFsS2C7bFBmegcw0KO0UoyX0kPe6jJkRD8XdCBnuhr0HYNzl8cy+Kvzx3sbuSzWE+nJoRthbBfp4wE+keIN3hKIDc9ZDvIggqQVFr+kkv8b022RmRKGiCz7qVH2TLYB0OhlrW9S4v77aGpN90MC1Rk2pFk5rtzweHfzazFWL5+/V7uNz0SSeC9EMixbXoATPN6s2fJQFMofWGoAYdbIGPHic53S7Fong="
